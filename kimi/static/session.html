<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Peaceful LLM Session</title>
  <style>
    body { background: #1e1e2f; color: #f0f0ff; margin: 0; display: flex; flex-direction: column; height: 100vh; }
    header { background: #2a2a3f; padding: 0.4rem; display: flex; gap: 0.6rem; align-items: center; }
    #log { flex: 1; overflow-y: auto; padding: 0.6rem; font-family: monospace; }
    .u { color: #4af; }
    .a { color: #afa; }
    .e { color: #faa; }
    footer { background: #2a2a3f; padding: 0.6rem; display: flex; gap: 0.4rem; }
    input { flex: 1; padding: 0.6rem; border-radius: 6px; border: none; }
    button { padding: 0.6rem 1.2rem; border-radius: 6px; border: none; background: #00af9c; color: #fff; cursor: pointer; }
  </style>
</head>
<body>
  <header>
    <span>Peaceful LLM</span>
    <span id="status">Ready</span>
  </header>
  <div id="log"></div>
  <footer>
    <input id="prompt" placeholder="Ask anything...">
    <button onclick="ask()">Send</button>
  </footer>
  <script>
    const token = "{{TOKEN}}";
    const email = "{{EMAIL}}";
    const log = document.getElementById("log");
    const status = document.getElementById("status");
    function add(type, text) {
      const p = document.createElement("div");
      p.className = type;
      p.textContent = new Date().toLocaleTimeString() + " " + text;
      log.appendChild(p);
      log.scrollTop = log.scrollHeight;
    }
    async function ask() {
      const p = document.getElementById("prompt");
      add("u", "You: " + p.value);
      status.textContent = "Thinking...";
      const res = await fetch("/ask", {method: "POST", body: new URLSearchParams({token, email, prompt: p.value})}).then(r => r.json());
      add("a", res.agent + ": " + res.reply);
      status.textContent = "Ready";
      if (res.errors) add("e", JSON.stringify(res.errors));
      p.value = "";
    }
  </script>
</body>
</html>